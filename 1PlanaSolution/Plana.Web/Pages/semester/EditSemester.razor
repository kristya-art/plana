@*@page "/editsemester/{Id}"*@
@page "/editsemester"
@using MatBlazor;

@inherits EditSemesterBase
@if (Semesters == null || Semester == null) { return; }

<h2>
    @Semester.Code
</h2>

    <EditForm  Model="@Semester">
        <label for="code">Code</label>
        <InputText id="code" @bind-Value="Semester.Code" />
        @if (Semester.ModuleRuns == null) { return; }

        @foreach (var MR in Semester.ModuleRuns)
        {
            <label for="id">place</label>
            <InputText id="place" @bind-Value="MR.Place" />
        }
    </EditForm>

<MatButton Outlined="true" @onclick="@(e=>openModules())">Modules view</MatButton>


@if (showModuleRunTable)
{
    <MatTable  Items="@Semester.ModuleRuns" class="mat-elevation-z5"
              FilterByColumnName="Module-Title">
        <MatTableHeader>

            <th>Module</th>
            <th>Module-Title</th>
            <th>Group</th>
            <th>Place</th>
            <th>Total Hours</th>
            <th>Lecturer</th>
            <th>Hours for concrete lecturer</th>
            <th>Actions</th>
            @*<th>Lect/Week-AS</th>
                <th>Lect/Week-SS</th>*@


        </MatTableHeader>
        <MatTableRow>


            @*<EditForm  Model="@Semester" OnValidSubmit="HandleValidSubmit">
                <DataAnnotationsValidator />*@

            @if (Semester.ModuleRuns == null) { return; }
            <td>@context.Code</td>

            <td>@context.Module.Code</td>
            @*<td><InputText id="Code" @bind-Value="Semester.Code"></InputText></td>*@

            <td>
                <p>
                    <MatTextField Style="width:50px;" @bind-Value="@context.Code" Label="@context.Code" Outlined="true"></MatTextField>
                </p>

            </td><td>@context.Module.Title</td>

            <td>@context.Place</td>
            <td>@context.Module.TotalHours</td>
            @foreach (var mr in context.LecturersMR)
                {
                @*<td>@mr.Lecturer.FirstName</td>*@
            <td>
                <p>
                    <MatTextField @bind-Value="mr.Lecturer.FirstName" Label="@mr.Lecturer.FirstName" Outlined="true"></MatTextField>
                    <MatButton Raised="true" Icon="add" title="Add lecturer"></MatButton>

                </p> </td>
                }

            <td>
                <MatButton Raised="true" @onclick="HandleValidSubmit" Icon="edit" title="Edit plan"></MatButton>
                <MatButton Raised="true" @onclick="HandleValidSubmit" Icon="save" title="Save"></MatButton>
                <form>
                    <MatButton type="submit" name="HandleValieSubmit" @onclick="HandleValidSubmit">OK</MatButton>
                </form>
            </td>

            @*</EditForm>*@

            @foreach (var aa in Semester.AdditionalAssignments)
                {
                <td>@aa.AAHours</td>
                }





        </MatTableRow>
    </MatTable>

}
<MatButton OnClick="BackHome">Back</MatButton>
<p>
    <MatTextField @bind-Value="@Semester.Code" Label="Standard" Outlined="true"></MatTextField>
</p>
@code {
    #region Variables
    bool dialogIsOpen = false;
    bool _isEdit = false;

    bool showModuleRunTable = false;

    #endregion

    #region dialog box methods

    private void openDialog(bool isEdit)
    {
        if (!_isEdit) Semester = new Semester();
        dialogIsOpen = true;
    }
    public bool openModules()
    {
        if (showModuleRunTable == false)
        {
            return showModuleRunTable = true;
        }
        return showModuleRunTable = false;
    }

    #endregion




    public void BackHome()
    {
        NavigationManager.NavigateTo("/home");
    }






}
<style>
    .editForm {
        color: powderblue;
        width: 100px;
    }
   
</style>
